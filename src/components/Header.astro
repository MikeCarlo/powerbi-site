---
import Logo from './Logo.astro';

const base = import.meta.env.BASE_URL.replace(/\/$/, '');

const navItems = [
  { label: 'podcast', href: `${base}/podcast/` },
  { label: 'power designer', href: `${base}/power-designer/` },
  { label: 'themes', href: 'https://themes.powerbi.tips' },
  { label: 'events', href: `${base}/events/` },
  { label: 'training', href: `${base}/training/` },
  { label: 'about', href: `${base}/about/` }
];
---

<header class="bg-gradient-to-r from-[#3B82F6] to-[#8B5CF6] text-white">
  <div class="mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-7">
    <Logo href={`${base}/`} class="h-10 w-auto" alt="PowerBI.tips" />
    
    <!-- Desktop nav -->
    <nav class="hidden items-center gap-6 text-sm font-medium uppercase tracking-wide md:flex">
      {navItems.map((item) => (
        <a class="hover:text-white/80" href={item.href}>{item.label}</a>
      ))}
      <a class="hover:text-white/80" href={`${base}/search/`} aria-label="Search">
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </a>
    </nav>
    
    <!-- Mobile hamburger button -->
    <button 
      id="mobile-menu-btn" 
      class="flex h-10 w-10 items-center justify-center rounded-lg hover:bg-white/10 md:hidden"
      aria-label="Toggle menu"
      aria-expanded="false"
    >
      <svg id="menu-icon" class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg id="close-icon" class="hidden h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
  
  <!-- Mobile nav menu -->
  <nav id="mobile-menu" class="hidden border-t border-white/20 px-6 py-4 md:hidden">
    <ul class="flex flex-col gap-4">
      {navItems.map((item) => (
        <li>
          <a 
            class="block text-sm font-medium uppercase tracking-wide hover:text-white/80" 
            href={item.href}
          >
            {item.label}
          </a>
        </li>
      ))}
      <li>
        <a class="flex items-center gap-2 text-sm font-medium uppercase tracking-wide hover:text-white/80" href={`${base}/search/`}>
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          search
        </a>
      </li>
    </ul>
  </nav>
</header>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  menuBtn?.addEventListener('click', () => {
    const isOpen = mobileMenu?.classList.toggle('hidden');
    menuIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
    menuBtn?.setAttribute('aria-expanded', isOpen ? 'false' : 'true');
  });
</script>
