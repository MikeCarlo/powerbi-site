---
import BaseLayout from '../layouts/BaseLayout.astro';

const base = import.meta.env.BASE_URL;
---

<BaseLayout title="Search | PowerBI.tips" description="Search the PowerBI.tips blog.">
  <h1 class="text-3xl font-semibold">Search</h1>
  <p class="mt-2 text-neutral-600">Find posts, tips, and resources across PowerBI.tips.</p>

  <div id="search" class="mt-8"></div>

  <link rel="stylesheet" href={`${base}pagefind/pagefind-ui.css`} />
  <script is:inline define:vars={{ base }}>
    window.addEventListener('DOMContentLoaded', () => {
      const script = document.createElement('script');
      script.src = base + 'pagefind/pagefind-ui.js';
      script.onload = () => {
        if (window.PagefindUI) {
          new window.PagefindUI({ 
            element: '#search', 
            showSubResults: true,
            baseUrl: base
          });
        }
      };
      document.head.appendChild(script);
    });
  </script>

  <style is:global>
    .pagefind-ui__result-link {
      color: #2563eb;
      font-weight: 600;
    }
    .pagefind-ui__result-link:hover {
      color: #1d4ed8;
    }
    .pagefind-ui__search-input {
      border-radius: 0.5rem;
      border-color: #e5e5e5;
      padding: 0.75rem 1rem;
    }
    .pagefind-ui__search-input:focus {
      border-color: #2563eb;
      outline: none;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    .pagefind-ui__result {
      padding: 1rem;
      border-radius: 0.5rem;
      border: 1px solid #e5e5e5;
      margin-bottom: 0.5rem;
    }
    .pagefind-ui__result:hover {
      border-color: #d4d4d4;
    }
  </style>
</BaseLayout>
